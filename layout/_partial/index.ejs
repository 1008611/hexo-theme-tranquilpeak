<%
    var thumbNailImgClass = '';

    if (theme.thumbnail_image) {
        thumbNailImgClass = 'post--thumbnailimg';
    }
%>
<div class="posts">
    <% page.posts.each(function(post) { %>
        <article class="post <%= thumbNailImgClass %>">
            <% var thumbNailImg = null; %>
            <% if ((post.photos.length) && (theme.thumbnail_image)) { %>
                <% thumbNailImg = post.permalink + post.photos[0]; %>
                <div class="post-thumbnailimg">
                    <img alt="" src="<%= thumbNailImg %>"/>
                </div>
            <% } %>
            <div class="post-info">
                <% if (post.link) { %>
                <a href="<%- url_for(post.link) %>" target="_blank" itemprop="url">
                    <h1 class="post-title"><%= post.title %></h1>
                </a>

                <% } else { %>
                <a href="<%= post.permalink %>">
                    <h1 class="post-title"><%= post.title %></h1>
                </a>
                <% } %>
                <div class="post-date text-xsmall">
                    <%= post.date.format(' MMM DD, YYYY').toUpperCase() %>
                    <% if (!post.updated) { %>
                        <%= ' - updated : ' + post.updated.format('MMM DD, YYYY') %>
                    <% } %>
                </div>
                <div class="post-readingtime text-xsmall">
                    <% if (post.readingtime) { %>
                        <%= ' - ' + post.readingtime + ' min read - '.toUpperCase() %>
                    <% } %>
                </div>
                <div class="post-tags-categories text-xsmall">
                    <% if (post.categories.length) { %>
                        <span>
                            <% if (post.categories.length > 1) { %>
                            CATEGORIES :
                            <% } else { %>
                            CATEGORY :
                            <% } %>
                        </span>
                        <%- partial('post/category', {categories: post.categories})%>
                    <% } %>
                </div>
                <div class="post-snippet text-large">
                    <% if (post.excerpt) { %>
                        <%- post.excerpt %>
                    <% } else { %>
                        <%- post.content.replace(/<(?:.|\n)*?>/gm, '').substr(0, 300) %>
                        <p></p>
                    <% } %>
                    <% if (post.link) { %>
                        <p>
                            <a href="<%- url_for(post.link) %>" target="new" class="link"><%- theme.go_to_message %> </a>
                        </p>
                    <% } else { %>
                        <% if (theme.read_more_message) { %>
                            <p>
                                <a href="<%= post.permalink %>" class="link"><%- theme.read_more_message %></a>
                            </p>
                        <% } %>
                    <% } %>
                </div>
            </div>
            <div class="post-separator"></div>
        </article>
    <% }) %>
    <%- partial('pagination', {type: 'page'}) %>
</div>